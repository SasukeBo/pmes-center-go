# 方案书

## 一、项目背景

现有生产设备记录设备数据，并已实现将生产数据文件上传到FTP服务器的功能，在此基础上，实现数据可视化功能，通过开发系统软件，来实现使用者通过给定设备名称或产品名称，查询一定时间范围的生产数据，以及数据分析结果绘图显示的功能。本方案书将给出详细实施方案、开发步骤以及后期维护范围。

## 二、系统设计及开发

整套系统以HTTP服务器的形式实现功能，开发工作分为两部分：后端开发、前端开发，编程语言使用Golang和Javascript。

### 1. 后端开发

1. FTP服务器访问功能

  使用Go语言结合FTP通讯协议，按照需求方提供的FTP连接地址端口及登录账号密码，连接FTP服务器，局域网内访问FTP服务器设备数据CSV文件。
  需要设计定时器功能，根据设置时间周期，获取FTP服务器数据。

2. CSV文件解析功能

  结合需求方给定的文件存储路径，及文件命名规范，使用Go语言实现准确抓取指定设备或产品的一定时间范围内生产数据文件，并参照需求方提供的数据文件模板格式，编写程序，将文件内容解析成产品对应尺寸数据及上下限。

3. 数据缓存数据库搭建及表格设计

  针对直接访问FTP服务器文件的速度比较慢的问题，在系统内搭建MySQL数据库，根据实际部署机器的物理存储大小，设定在数据库中缓存多少天前的设备生产数据，使用者在访问缓存日期范围内的生产数据时可以达到快速响应，而查询较早日期的生产数据，则需要系统及时抓取FTP服务器的CSV文件，解析计算并绘制成图。
  针对项目模型抽象出设备、产品、尺寸、尺寸数据、用户五个对象，在数据库中创建相应表格。

4. HTTP服务器接口开发

  根据需求，分析需要开发相对应的数据请求接口，主要接口有：
  - 设备请求接口
  - 产品请求接口
  - 产品尺寸请求接口
  - 产品尺寸数据请求接口
  - 系统登录接口
  - 设备生产详情接口
  - 产品尺寸数据分析接口

  接口完成后需要测试接口是否正常工作，数据返回是否正常。

### 2. 前端开发

1. 交互功能及页面设计

  根据需求，用户操作面板需要提供：
  - 系统首页，展示FTP服务器现有上传数据的设备列表
  - 设备生产数据详情页，该面板可供查询指定日期范围的生产数据，及生产总数统计，良率。
  - 产品列表页，显示FTP服务器现有上传数据的产品列表。
  - 产品数据详情页，该面板可供查询指定日期范围的生产数据，及生产总数统计，良率。
  - 尺寸详情页，在尺寸详情页，选择产品则会显示产品的所有尺寸统计数据，还可以在此基础上限定生产设备。
  - 系统配置页，用于配置一些系统参数。

2. 编码实现

  使用JavaScript+Html+CSS开发前端页面，请求后端服务器接口数据，以网页的形式呈现。

3. 功能测试

  测试各页面功能，及系统运行是否正常。


## 三、系统部署

需要需求方提供部署机器，部署采用Docker容器部署，部署环境为Linux服务器系统环境，网络访问方式为局域网访问，手机等移动电子设备可通过局域无线网访问系统数据。

## 四、维护

系统交付部署后，遇到运行故障等问题，可以提供技术支持，但不包括功能拓展及修改，所有功能设计在需求确定后，不可做出较大更改。
