type Query {
  """
  获取当前用户
  """
  currentUser: User!
  """
  获取产品数据
  """
  products(searchInput: Search!): ProductWrap!
  """
  分析尺寸数据
  """
  analyzeSize(searchInput: Search!): SizeResult!
  """
  获取料号数据
  """
  materials(page: Int!, limit: Int!): [Material]!
  """
  获取设备生产数据
  """
  devices(searchInput: Search!): [AnalysisResult]!
  """
  分析料号数据
  """
  analyzeMaterial(searchInput: Search!): MaterialResult!
  dataFetchFinishPercent(materialID: Int!): Float!
}

type Mutation {
  login(loginInput: LoginInput!): User!
  setting(settingInput: SettingInput!): SystemConfig!
  addMaterial(materialName: String!): Material!
  active(accessToken: String!): String!
}

type MaterialResult {
  material: Material!
  ok: Int!
  ng: Int!
  dataset: Map
}

type SizeResult {
  total: Int!
  ok: Int!
  ng: Int!
  cp: Float!
  cpk: Float!
  normal: Float!
  dataset: Map
}

type AnalysisResult {
  id: Int!
  name: String!
  cp: Float!
  cpk: Float!
  ok: Int!
  ng: Int!
  normal: Float!
  dataset: Map!
}


type Material {
  id: Int!
  name: String!
}

input SettingInput {
  key: String!
  value: String!
}

type SystemConfig {
  id: Int!
  key: String!
  value: String!
  createdAt: Time!
  updatedAt: Time!
}

type User {
  id: Int!
  account: String!
  admin: Boolean!
}

input LoginInput {
  account: String!
  password: String!
}

type Product {
  id: Int!
  uuid: String!
  materialID: String!
  deviceID: Int!
  qualified: Boolean!
  sizeValue: Map!
  createdAt: Time!
}

type ProductWrap {
  tableHeader: [String]!
  products: [Product]!
  count: Int!
  qualifiedRate: Float!
}

input Search {
  "料号，指定料号"
  materialID: Int
  "设备名称，如果不为空则指定该设备生产"
  deviceID: Int
  "尺寸，如果不为空则指定改尺寸数据"
  sizeID: Int
  "查询时间范围起始时间"
  beginTime: Time
  "查询时间范围结束时间"
  endTime: Time
}

scalar Time
scalar Map
