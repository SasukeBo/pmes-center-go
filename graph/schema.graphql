type Query {
  """
  获取当前用户
  """
  currentUser: User!
  """
  获取产品数据
  """
  products(searchInput: Search!): ProductWrap!
  """
  获取尺寸数据
  """
  sizes(searchInput: Search!): AnalysisResult!
  """
  获取料号数据
  """
  materials(searchInput: Search!): [AnalysisResult]!
  """
  获取设备生产数据
  """
  devices(searchInput: Search!): [AnalysisResult]!
}

type Mutation {
  login(loginInput: LoginInput!): User!
  setting(settingInput: SettingInput!): SystemConfig!
  addMaterial(materialID: String!): String!
  active(accessToken: String!): String!
}

type AnalysisResult {
  id: Int!
  name: String!
  cp: Float!
  cpk: Float!
  ok: Int!
  ng: Int!
  normal: Float!
  dataset: Map!
}

input Search {
  "设备名称，如果不为空则指定该设备生产的产品"
  deviceName: String
  "料号，如果不为空则指定该料号的产品"
  materialID: String!
  "查询时间范围起始时间"
  beginTime: Time
  "查询时间范围结束时间"
  endTime: Time
}

input SettingInput {
  key: String!
  value: String!
}

type SystemConfig {
  id: Int!
  key: String!
  value: String!
  createdAt: Time!
  updatedAt: Time!
}

type User {
  id: Int!
  account: String!
  admin: Boolean!
}

input LoginInput {
  account: String!
  password: String!
}

type Product {
  id: Int!
  uuid: String!
  materialID: String!
  deviceID: Int!
  qualified: Boolean!
  sizeValue: Map!
  createdAt: Time!
}

type ProductWrap {
  tableHeader: [String]!
  products: [Product]!
  count: Int!
  qualifiedRate: Float!
}

scalar Time
scalar Map
